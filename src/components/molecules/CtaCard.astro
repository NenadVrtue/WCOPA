---
import { Image } from "astro:assets";
import { urlForImage } from "@sanity/lib/urlForImage";
import ButtonLink from "@components/ui/ButtonLink.astro";
import star from "@assets/star.png";
const { ctaCard } = Astro.props;
const { image, ctaText, ctaLink } = ctaCard;

const bgImageUrl = image ? urlForImage(image)?.url() : null;
---

<article
  class="relative xl:px-6 px-2 py-6 xl:py-12 bg-dark-2 text-white rounded-sm min-h-[292px] flex flex-col justify-end"
>
  <Image
    src={star}
    alt=""
    width={72}
    height={72}
    class="absolute -top-10 w-18 h-18 right-1/2 translate-x-1/2 z-10"
  />
  <div
    class="absolute top-0 right-0 w-full overflow-hidden rounded-sm bg-indigo h-full"
  >
    <Image
      src={bgImageUrl}
      inferSize
      alt=""
      class="w-full h-full object-cover"
    />
    <div class="w-full h-full bg-indigo/70 absolute top-0 right-0"></div>
  </div>
  <div class="flex flex-col xl:flex-row items-center gap-4 sm:gap-8">
    <h3 class="z-10 relative text-lg font-bold w-full sm:w-2/3 text-center">
      {ctaText}
    </h3>
    <div class="w-full flex justify-center xl:w-1/3">
      <ButtonLink buttonLink={ctaLink} variation="primary-dark" />
    </div>
  </div>
</article>
